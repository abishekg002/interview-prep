<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interview Prep Pro | 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #f8fafc; }
        .active-cat { background: #2563eb !important; color: white !important; }
        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="min-h-screen py-8 px-4">

    <div class="max-w-6xl mx-auto">
        <header class="mb-10 text-center md:text-left flex justify-between items-end">
            <div>
                <h1 class="text-3xl font-800 text-slate-900 tracking-tight">Interview <span class="text-blue-600">Mastery</span></h1>
                <p class="text-slate-500 font-medium">Smart Practice based on your Spreadsheet.</p>
            </div>
            <div id="status-dot" class="flex items-center gap-2 text-xs font-bold text-slate-400">
                <span class="w-2 h-2 rounded-full bg-slate-300 animate-pulse"></span> DB LINKED
            </div>
        </header>

        <div id="category-bar" class="flex flex-wrap gap-2 mb-8 justify-center md:justify-start">
            </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-4 bg-white rounded-2xl p-6 shadow-sm border border-slate-200 h-fit">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Select Role</h3>
                <div id="role-list" class="space-y-1 max-h-[500px] overflow-y-auto custom-scroll">
                    <p class="text-slate-400 italic text-sm">Waiting for Google Sheets...</p>
                </div>
            </div>

            <div class="lg:col-span-8">
                <div id="practice-panel" class="hidden space-y-6">
                    <div class="bg-white p-8 md:p-12 rounded-[2.5rem] shadow-xl border border-slate-100 min-h-[480px] flex flex-col justify-between">
                        <div>
                            <div class="flex justify-between items-center mb-8">
                                <span id="disp-role-badge" class="bg-slate-900 text-white px-4 py-1.5 rounded-xl text-[10px] font-bold uppercase tracking-widest"></span>
                                <span id="q-counter" class="text-xs font-bold text-slate-300 tracking-widest uppercase"></span>
                            </div>
                            <h2 id="disp-question" class="text-2xl md:text-3xl font-800 text-slate-800 leading-tight mb-10"></h2>
                            
                            <div id="answer-box" class="hidden">
                                <div class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-xl">
                                    <h4 class="text-blue-700 font-bold text-xs uppercase mb-2 tracking-widest">Suggested Answer Strategy</h4>
                                    <p id="disp-answer" class="text-slate-700 leading-relaxed italic"></p>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col sm:flex-row gap-4 mt-12">
                            <button onclick="toggleAnswer()" id="ans-btn" class="flex-1 bg-slate-100 text-slate-800 py-4 rounded-2xl font-bold hover:bg-slate-200 transition-all border border-slate-200">Show Strategy</button>
                            <button onclick="nextQuestion()" class="flex-1 bg-blue-600 text-white py-4 rounded-2xl font-bold hover:bg-blue-500 shadow-lg shadow-blue-200">Next Question â†’</button>
                        </div>
                    </div>

                    <div class="bg-white border-2 border-amber-100 p-6 rounded-3xl flex items-center gap-6 shadow-sm">
                        <div class="w-14 h-14 bg-amber-50 rounded-2xl flex items-center justify-center text-2xl shadow-inner">ðŸŽ“</div>
                        <div>
                            <p class="text-[10px] font-black text-amber-500 uppercase tracking-widest mb-1">Recommended Certification</p>
                            <h4 id="disp-cert" class="text-xl font-bold text-slate-800 leading-tight"></h4>
                        </div>
                    </div>
                </div>

                <div id="welcome-screen" class="bg-slate-50 rounded-[2.5rem] border-2 border-dashed border-slate-200 p-20 text-center">
                    <div class="mb-4 inline-flex items-center justify-center w-16 h-16 bg-white rounded-full text-2xl shadow-sm">ðŸš€</div>
                    <p class="text-slate-500 font-bold text-lg">Pick a role to start your practice session.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // PASTE YOUR GOOGLE SHEET CSV LINK HERE
        const SHEET_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSsCBf6RM1KTWmT9Fzr9ABS3_08fVIYKEX5UbUlufi4DnIA9sb0zcRa0W49cb76yetcWXGGPtI9x21u/pub?gid=327169888&single=true&output=csv";

        let allData = [];
        let currentQuestions = [];
        let currentIdx = 0;

        // Fetch Data
        Papa.parse(SHEET_URL, {
            download: true,
            header: true,
            complete: function(results) {
                // Filter out empty rows and link to your exact headers
                allData = results.data.filter(row => row.Role && row.Category);
                document.getElementById('status-dot').innerHTML = '<span class="w-2 h-2 rounded-full bg-emerald-500"></span> LIVE SYNC';
                initApp();
            }
        });

        function initApp() {
            const categories = ["All", ...new Set(allData.map(item => item.Category))];
            const catBar = document.getElementById('category-bar');
            
            catBar.innerHTML = categories.map(cat => 
                `<button onclick="filterByCategory('${cat}')" id="btn-${cat.replace(/\s/g, '')}" class="cat-btn bg-white border border-slate-200 px-6 py-2 rounded-xl font-bold text-sm text-slate-600 hover:border-blue-400 transition-all">${cat}</button>`
            ).join('');

            filterByCategory("All");
        }

        function filterByCategory(cat) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active-cat'));
            const btn = document.getElementById(`btn-${cat.replace(/\s/g, '')}`);
            if(btn) btn.classList.add('active-cat');

            const roleList = document.getElementById('role-list');
            const filteredData = cat === "All" ? allData : allData.filter(d => d.Category === cat);
            const uniqueRoles = [...new Set(filteredData.map(d => d.Role))];
            
            roleList.innerHTML = uniqueRoles.map(role => `
                <button onclick="startInterview('${role}')" class="w-full text-left p-4 rounded-xl font-bold text-slate-600 hover:text-blue-600 hover:bg-blue-50 transition-all mb-1">
                    ${role}
                </button>
            `).join('');
        }

        function startInterview(roleName) {
            currentQuestions = allData.filter(d => d.Role === roleName);
            currentIdx = 0;
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('practice-panel').classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            const data = currentQuestions[currentIdx];
            document.getElementById('disp-role-badge').innerText = data.Role;
            document.getElementById('disp-question').innerText = data.Question;
            
            // USING YOUR SPECIFIC HEADERS HERE
            document.getElementById('disp-answer').innerText = data["Suggested Answer Strategy"];
            document.getElementById('disp-cert').innerText = data["Recommended Certificate"] || "N/A";
            
            document.getElementById('q-counter').innerText = `Question ${currentIdx + 1} / ${currentQuestions.length}`;
            document.getElementById('answer-box').classList.add('hidden');
            document.getElementById('ans-btn').innerText = "Show Strategy";
        }

        function nextQuestion() {
            currentIdx = (currentIdx + 1) % currentQuestions.length;
            showQuestion();
        }

        function toggleAnswer() {
            const box = document.getElementById('answer-box');
            const btn = document.getElementById('ans-btn');
            box.classList.toggle('hidden');
            btn.innerText = box.classList.contains('hidden') ? "Show Strategy" : "Hide Strategy";
        }
    </script>
</body>
</html>
